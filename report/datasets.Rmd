---
title: "Datasets information"
output: html_notebook
---
```{r}
root_dir <- rprojroot::is_git_root$find_file()
if (getwd() != root_dir) setwd(root_dir)
config <- yaml::read_yaml('config.yml')

library(magrittr)
```

## Experimental design
```{r}
read.delim('annot/datasets.tsv', na.strings='')
```

## Choose dataset
```{r}
config$geo_datasets %>% paste(seq_along(.), ., sep=': ') %>% cat(sep=', ')
```
```{r}
gse_id <- config$geo_datasets[8]
cat('Selected dataset:', gse_id)
```

## Description
Information retrieved from NCBI database, GEO website and `GEOmetadb`.
```{r}
gse_id %>%
    sprintf(fmt='annot/info/%s.txt') %>%
    dget() %>%
    extract(c('title', 'summary', 'Overall design', 'geo_url', 'article_url', 'article_title', 'article_abstract')) %>%
    lapply(paste, collapse=' ') %>%
    paste(toupper(names(.)), ., sep=': ') %>%
    stringr::str_wrap(width=90) %>%
    cat(sep='\n\n')
```

## Article highlights
Relevant excerpts from associated publication.
```{r}
gse_id %>%
    sprintf(fmt='annot/article/%s.txt') %>%
    scan(character(), sep='\n', quote='"', comment.char='(', quiet=T) %>%
    stringr::str_wrap(width=90) %>%
    cat(sep='\n\n')
```